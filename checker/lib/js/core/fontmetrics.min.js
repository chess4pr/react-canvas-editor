"use strict";!function(){if(!document.defaultView.getComputedStyle)throw"ERROR: 'document.defaultView.getComputedStyle' not found. This library only works in browsers that can report computed CSS values.";CanvasRenderingContext2D.prototype.measureTextWidth=CanvasRenderingContext2D.prototype.measureText;var e=function(e,t){return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)};CanvasRenderingContext2D.prototype.measureText2=function(t,n,a){var o=this.measureTextWidth(t),i=!/\S/.test(t);o.fontsize=n;var r=document.createElement("div");r.style.position="absolute",r.style.opacity=0,r.style.font=a,r.innerHTML=t+"<br/>"+t,document.body.appendChild(r),o.leading=1.2*n;var d=e(r,"height");if(d=d.replace("px",""),d>=2*n&&(o.leading=d/2|0),document.body.removeChild(r),i)o.ascent=0,o.descent=0,o.bounds={minx:0,maxx:o.width,miny:0,maxy:0},o.height=0;else{var l=document.createElement("canvas"),s=100;l.width=o.width+s,l.height=3*n,l.style.opacity=1,l.style.font=a;var u=l.getContext("2d");u.font=a;var m=l.width,c=l.height,h=c/2;u.fillStyle="white",u.fillRect(-1,-1,m+2,c+2),u.fillStyle="black",u.fillText(t,s/2,h);for(var y=u.getImageData(0,0,m,c).data,f=0,p=4*m,v=y.length;++f<v&&255===y[f];);var g=f/p|0;for(f=v-1;--f>0&&255===y[f];);var x=f/p|0;for(f=0;f<v&&255===y[f];)f+=p,f>=v&&(f=f-v+4);var C=f%p/4|0,w=1;for(f=v-3;f>=0&&255===y[f];)f-=p,f<0&&(f=v-3-4*w++);var b=f%p/4+1|0;o.ascent=h-g,o.descent=x-h,o.bounds={minx:C-s/2,maxx:b-s/2,miny:0,maxy:x-g},o.height=1+(x-g)}return o}}();
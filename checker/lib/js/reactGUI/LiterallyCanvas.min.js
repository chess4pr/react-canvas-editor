"use strict";var React=require("../reactGUI/React-shim"),_require=require("../reactGUI/ReactDOM-shim"),findDOMNode=_require.findDOMNode,_require2=require("../core/util"),classSet=_require2.classSet,Picker=require("./Picker"),Options=require("./Options"),createToolButton=require("./createToolButton"),LiterallyCanvasModel=require("../core/LiterallyCanvas"),defaultOptions=require("../core/defaultOptions");require("../optionsStyles/font"),require("../optionsStyles/stroke-width"),require("../optionsStyles/line-options-and-stroke-width"),require("../optionsStyles/polygon-and-stroke-width"),require("../optionsStyles/null");var CanvasContainer=React.createClass({displayName:"CanvasContainer",shouldComponentUpdate:function(){return!1},render:function(){return React.createElement("div",{key:"literallycanvas",className:"lc-drawing with-gui"})}}),LiterallyCanvas=React.createClass({displayName:"LiterallyCanvas",getDefaultProps:function(){return defaultOptions},bindToModel:function(){var t=findDOMNode(this.canvas);this.props;this.lc.bindToElement(t),"function"==typeof this.lc.opts.onInit&&this.lc.opts.onInit(this.lc)},componentWillMount:function(){var t=this;this.lc||(this.props.lc?this.lc=this.props.lc:this.lc=new LiterallyCanvasModel(this.props),this.toolButtonComponents=this.lc.opts.tools.map(function(e){return createToolButton(new e(t.lc))}))},componentDidMount:function(){this.lc.isBound||this.bindToModel()},componentWillUnmount:function(){this.lc&&this.lc._teardown()},render:function(){var t=this,e=this.lc,o=this.toolButtonComponents,i=(this.props,this.lc.opts),n=i.imageURLPrefix,r=i.toolbarPosition,a=i.imageSize,s={lc:e,toolButtonComponents:o,imageURLPrefix:n},l=classSet({"toolbar-at-top":"top"===r,"toolbar-at-bottom":"bottom"===r,"toolbar-hidden":"hidden"===r}),c={};return a.height&&(c.height=a.height),React.createElement("div",{className:"literally "+l,style:c},React.createElement(CanvasContainer,{ref:function(e){return t.canvas=e}}),React.createElement(Picker,s),React.createElement(Options,{lc:e,imageURLPrefix:n}))}});module.exports=LiterallyCanvas;